# Лабораторная работа №4: бинаризация и простое детектирование объектов

## Введение
Цель работы - реализовать генерацию тестовых изображений, состоящих из круго различной яркости и радиуса. Применить к изображению размытие, добавить аддитивный гауссовский шум. Каждое изображение должно иметь JSON файл разметки с параметрами координат, радиусов кругов, размеры итоговоого изображения, цвет, blur и std фона.

Реализовать детектор объектов на основе адаптивной бинаризации и разделению по компонентам связности, а так же Лапласиан Гауссиана (LoG).

Реализовать подсчет качества выполненной детекции.


## Реализация

### Генерация тестовых изображений
Функция `generateImageWithCircles()  
генерирует изображение с следующими параметрами:
int count - количество кругов в строке;
int min_radius - минимальный радиус круга;
int max_radius - максимальный радиус круга;
int min_contrast - минимальная яркость круга;
int max_contrast - максимальная яркость круга;
double std - стандартное отклонение нормального аддитивного гауссовского шума;
int blur - параметр размытия;
 bool bSave - сохранять/не сохранять в файл итоговое изображение;

### Детекция (адаптивная бинаризация и компоненты связности)
Функции `makeAdaptiveBinarization()` и `connectedComponentsDetection()` Применим алгоритм бинаризации и затем поиск компонент связности. Компонентыы связности отфильтруем по размеру, обычно он известен из предметной области.

### Детекция (LoG)
`LoG()`

### Подсчет качества детекции
Для каждого объекта ground truth вычисляем IoU `IoU()` с полученными после детекции объектами. Считаем показатели TP, FP и FN `evaluateDetections()`


## Результат

| Сгенерированное изображение |Детекция бинаризация + компоненты связности |
|----------------------|----------------|
| ![](https://github.com/zhuzzzhha/misis2024s-21-03-zhukova-a-v/blob/main/images/lab_1/generated.png) | ![](https://github.com/zhuzzzhha/misis2024s-21-03-zhukova-a-v/blob/main/images/lab_1/connected_comps.png) |



| Параметр | Значение |
|---|---|
| Количество кругов | 100 |
| Минимальный радиус | 2 |
| Максимальный радиус | 31 |
| Минимальный контраст | 36 |
| Максимальный контраст | 219 |
| Std шума | 22 |
| Blur | 2 |

Вычисленные показатели


| IoU пороговое значение | Порог для компонент связности | TP | FP | FN |
|---|---|---|---|---|
| 10 | 4 | 13 | 11749 | 87 |
| 10 | 30 | 15 | 2471 | 85 |
| 10 | 50 | 16 | 1242 | 84 |
| 10 | 60 | 18 | 922 | 82 |
| 10 | 70 | 8 | 721 | 92 |
| 10 | 100 | 8 | 344 | 92 |
| 10 | 120 | 7 | 248 | 93 |
| 10 | 150 | 9 | 144 | 91 |
| 20 | 4   |16 |11768| 84 |
| 20 | 30  |16 | 2338| 84 |
| 20 | 50  |14 | 1221| 86 |
| 20 | 60  | 8 | 901 | 92 |
| 20 | 70  | 10| 709 | 90 |
| 20 | 100 | 6 | 362 | 94 |
| 20 | 120 | 5 | 236 | 95 |
| 20 | 150 | 4 | 138 | 96 |

|Детекция бинаризация + компоненты связности |Порог для компонент свзяности |Порог для IoU | 
|----------------------|--|--|
| ![](https://github.com/zhuzzzhha/misis2024s-21-03-zhukova-a-v/blob/main/images/lab_1/generated.png) |4 |  10 |

## Вывод
